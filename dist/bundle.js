!function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var a=n(1),o=i(a),r=n(3),s=i(r);window.onload=function(){var t=document.getElementById("aniBtn"),e=document.getElementById("box"),n=document.getElementById("openBullet"),i=document.getElementById("bulletCanvas"),a=document.getElementById("showTips"),r=void 0,l=void 0;l=new s.default({id:"dialog",titleId:"dialog-title",infoId:"dialog-info",btnId:"dialogBtnGroup"}),l.bindEvents(l.toggleDisplay.bind(l),l.toggleDisplay.bind(l)),a.addEventListener("click",function(){l.toggleDisplay()}),t.addEventListener("click",function(t){t.target.innerText="开始动画"===t.target.innerText?"重置动画":"开始动画",e.classList.toggle("move")}),n.addEventListener("click",function(t){"开始弹幕"===t.target.innerText?(t.target.innerText="结束弹幕",r||(r=new o.default({id:"bulletCanvas",width:i.width,height:i.height,num:100}),r.initDisplay())):(t.target.innerText="开始弹幕",r.clearBullet(),r=null)}),document.getElementById("moveApproach").onchange=function(t){r?r.changeMoveState():t.preventDefault()}}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(2),r=function(){function t(e){i(this,t),this.color=(0,o.getRandomColor)(),this.speed=e.speed||1,this.txt=e.txt,this.dynamic=!!e.dynamic,this.top=Math.floor(Math.random()*(e.cHeight-14)),this.left=e.cWidth}return a(t,[{key:"move",value:function(){this.left-=this.speed}}]),t}(),s=function(){function t(e){i(this,t);var n=e.id,a=e.width,o=e.height,r=e.num;this.container={id:n||"bulletCanvas",width:a||400,height:o||400,num:r||100},this.dynamic=!0,this.msgs=[],this.txtList=["弹幕1","弹幕2","乔治亚·欧姬芙能画出任何东西","这就是她","我还是没搞明白","还不厌其烦地画那么多次","啊啊啊","每次的灯光不同"," 阿里领投11亿美金","入股印尼最大电商","爱立信或在瑞典以外","裁员2.5万人 超1/5员工会被裁","福特自动驾驶","汽车专利","方向盘","踏板可拆卸","印度核查中国品牌手机","因担心用户数据","有安全隐患","苹果CEO库克","写备忘录谴责白"],this.generateDataset()}return a(t,[{key:"generateDataset",value:function(){var t=function(){var t=this.txtList.length,e=this.dynamic,n=(this.container.left,this.txtList[Math.floor(Math.random()*t-1e-7)]),i=this.dynamic?1+Math.floor(3*Math.random()):12;this.msgs.push(new r({speed:i,txt:n,dynamic:e,cWidth:this.container.width,cHeight:this.container.height}))};this.intervalIns=setInterval(t.bind(this),Math.floor(1e3/this.container.num))}},{key:"initDisplay",value:function(){window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,this.startAniFrame=requestAnimationFrame(this.renderFrame.bind(this))}},{key:"changeMoveState",value:function(){this.dynamic=!this.dynamic}},{key:"renderFrame",value:function(t){this.start||(this.start=t),t-this.start>40&&(this.start=t,this.renderBullet()),this.startAniFrame=requestAnimationFrame(this.renderFrame.bind(this))}},{key:"renderBullet",value:function(){var t=document.getElementById(this.container.id),e=t.getContext("2d"),n=this.msgs,i=n.length;e.clearRect(0,0,this.container.width,this.container.height),e.save();for(var a=0;a<i;a++){var o=n[a];if(o)if(o.left<-200)o=null;else{o.move();var r=o.dynamic?o.left:this.container.width/3,s=o.top;e.fillStyle=o.color,e.fillText(o.txt,r,s),e.restore()}}}},{key:"clearBullet",value:function(){(window.cancelAnimationFrame||window.mozCancelAnimationFrame)(this.startAniFrame);var t=document.getElementById(this.container.id),e=t.getContext("2d");e.clearRect(0,0,this.container.width,this.container.height),e.save()}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){return"#"+Math.floor(16777215*Math.random()).toString(16)};e.getRandomColor=i},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function(){function t(e){i(this,t),this.id=e.id||"dialog",this.titleId=e.titleId||"dialog-title",this.infoId=e.infoId||"dialog-info",this.btnId=e.btnId||"dialogBtnGroup"}return a(t,[{key:"toggleDisplay",value:function(){document.getElementById(this.id).classList.toggle("dialog-active")}},{key:"setTitle",value:function(t){t&&(document.getElementById(this.titleId).innerHTML="<span>"+t+"</span>")}},{key:"setInfo",value:function(t){t&&(document.getElementById(this.infoId).innerHTML=t.toString())}},{key:"bindEvents",value:function(t,e){var n=document.getElementsByClassName(this.btnId);n[0].addEventListener("click",t),n[1].addEventListener("click",e)}}]),t}();e.default=o}]);